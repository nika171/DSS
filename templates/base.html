<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Entscheidungsunterstützungssystem für Kompetenzmanagement und Projektzuweisung">
  <meta name="author" content="Ihr Unternehmen">
  <title>{% block title %}Entscheidungsunterstützungssystem{% endblock %}</title>
  
  <!-- Tailwind CSS Stylesheet (lokal kompiliert) -->
  <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet">
  
  <!-- Flowbite JavaScript für UI-Komponenten -->
  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.3.0/dist/flowbite.min.js" defer></script>
  
  <!-- Tailwind CSS CDN für zusätzliche Klassen -->
  <script src="https://cdn.tailwindcss.com" defer></script>
  
  {% block head %}{% endblock %}
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
  <header>
    <nav class="bg-[#2A4A6A] p-4 shadow-lg" role="navigation" aria-label="Hauptnavigation">
      <div class="container mx-auto flex justify-between items-center">
        <a href="{% if current_user.is_authenticated %}{{ url_for('admin') if current_user.admin else url_for('dashboard') }}{% else %}{{ url_for('login') }}{% endif %}" 
           class="text-white text-xl font-bold hover:text-gray-300 transition-colors">
          Entscheidungsunterstützungssystem
        </a>
        
        {% if current_user.is_authenticated %}
        <ul class="flex items-center space-x-6" role="menubar">
            {% if current_user.admin %}
            <li role="none">
              <a href="{{ url_for('admin') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Dashboard
              </a>
            </li>
            <li role="none">
              <a href="{{ url_for('history') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Projekthistorie
              </a>
            </li>
            <li role="none">
              <a href="{{ url_for('add_user') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Nutzerverwaltung
              </a>
            </li>
            {% else %}
            <li role="none">
              <a href="{{ url_for('dashboard') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Dashboard
              </a>
            </li>
            <li role="none">
              <a href="{{ url_for('competence') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Kompetenzen pflegen
              </a>
            </li>
            {% endif %}
            
            <li role="none">
              <a href="{{ url_for('logout') }}" 
                 class="text-white hover:text-gray-400 px-3 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                 role="menuitem">
                Logout
              </a>
            </li>
        </ul>
        {% endif %}
      </div>
    </nav>
  </header>
  
  <main role="main" class="container mx-auto px-4 py-8">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-6">
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} mb-2 p-4 rounded-lg {% if category == 'error' %}bg-red-100 border border-red-400 text-red-700{% elif category == 'success' %}bg-green-100 border border-green-400 text-green-700{% else %}bg-blue-100 border border-blue-400 text-blue-700{% endif %}" role="alert">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    
    {% block content %}{% endblock %}
  </main>

</body>
</html>